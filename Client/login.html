<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sign in page</title>
        <link rel="stylesheet" href="css/global.css">
        <link rel="stylesheet" href="css/login.css">
        <link rel="stylesheet" href="css/cookie_consent.css">
        <script type="text/javascript" src="js/login.js"></script>
        <script type="text/javascript" src="js/cookie_consent.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.16.min.js"></script>
        <script src="js/amazon-congito-auth.min.js"></script>
        <script src="js/amazon-cognito-identity.min.js"></script>
        <script src="js/config.js"></script>
        <script>
            function sign_in() {
                console.log('submitted');


                var authenticationData = {
                    Username :  document.getElementById('email_textbox').value,
                    Password : document.getElementById('password_textbox').value,
                };
                var authenticationDetails = new AmazonCognitoIdentity.AuthenticationDetails(authenticationData);
                var poolData = { UserPoolId : _config.cognito.UserPoolId,
                    ClientId : _config.cognito.ClientId
                };
                var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);
                var userData = {
                    Username : 'username',
                    Pool : userPool
                };
                var cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);
                cognitoUser.authenticateUser(authenticationDetails, {
                    onSuccess: function (result) {
                        var accessToken = result.getAccessToken().getJwtToken();

                        /* Use the idToken for Logins Map when Federating User Pools with identity pools or when passing through an Authorization Header to an API Gateway Authorizer */
                        var idToken = result.idToken.jwtToken;
                    },

                    onFailure: function(err) {
                        alert(err);
                    },

                }); 
            }
        </script>
    </head>
    <body onload="load_overlay()">
        <article>
            <section class="section_overlay">
                <section class="section_content">
                    <form class="form">
                        <h1>SIGN IN</h1>
                        <br>
                        <input type="text" placeholder="email" id="email_textbox">
                        <br>
                        <input type="password" placeholder="password" id="password_textbox">
                        <br>
                        <br>
                        <section class="sign_in_options">
                            <section>
                                <label class="clickable_label" onclick="reset_password()">Reset password</label>
                                <br style="margin:0">
                                <label class="clickable_label" onclick="create_account()">create account</label>
                            </section>
                            <button class="submit_button" type="button" onclick="sign_in()">sign in</button>
                        </section>
                    </form>
                </section>
            </section>
            <aside id="cookie_overlay" class="cookie_overlay">
                <section class="cookie_content">
                    <h3>Cookie Consent</h3>
                    <p>Our site uses cookie to store browser information required for navigating pages and login functionality.</p>
                    <p>By continuing to use this website, you consent to the use of cookies.</p>
                    <button onclick="close_cookie_consent()">Confirm and close</button>
                </section>
            </aside>
        </article>
    </body>
</html>